(this["webpackJsonpe-admin-react"]=this["webpackJsonpe-admin-react"]||[]).push([[32],{1114:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(254),a(255),a(117),a(209),a(113),a(256),a(307),a(148),a(338),a(319),Number(document.documentMode);var n=function(){return new Promise((function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.onchange=function(t){var a=t.target.files[0];e(a)},t.click(),t.remove()}))};document.addEventListener,document.removeEventListener},1291:function(e,t,a){},518:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));var n=a(173),r=a(0),c=a.n(r),o=a(939),l=a(115),i=a.n(l),u=(a(310),a(95)),s=(a(174),a(176)),m=a(77),d=a(102),f=a(101),p=a(100),b=a(1114),v=a(956),h=a(343),E=(a(202),["Helvetica","Arial","sans-serif","Simsun","Consolas","monospace"]),g=["12","13","14","16","18","20","24","28"],N=["18","20","22","24","28","32","36"],k=["#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"];function q(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("select",{className:"ql-header",defaultValue:""},c.a.createElement("option",{value:""},"\u6807\u9898"),c.a.createElement("option",{value:"1"},"\u6807\u98981"),c.a.createElement("option",{value:"2"},"\u6807\u98982"),c.a.createElement("option",{value:"3"},"\u6807\u98983"),c.a.createElement("option",{value:"4"},"\u6807\u98984"),c.a.createElement("option",{value:"5"},"\u6807\u98985"),c.a.createElement("option",{value:"6"},"\u6807\u98986")),c.a.createElement("select",{className:"ql-font"},E.map((function(e){return c.a.createElement("option",{value:e,key:e},e)}))),c.a.createElement("select",{className:"ql-size"},c.a.createElement("option",{value:""},"\u5b57\u4f53\u5927\u5c0f"),g.map((function(e){return c.a.createElement("option",{value:e,key:e},e+"px")}))),c.a.createElement("button",{className:"ql-bold"}),c.a.createElement("button",{className:"ql-italic"}),c.a.createElement("button",{className:"ql-underline"}),c.a.createElement("button",{className:"ql-strike"}),c.a.createElement("select",{className:"ql-color",defaultValue:"#00000"},c.a.createElement("option",{value:"#00000"}),k.map((function(e){return c.a.createElement("option",{value:e,key:e})}))),c.a.createElement("select",{className:"ql-background"},c.a.createElement("option",{value:"#00000"}),k.map((function(e){return c.a.createElement("option",{value:e,key:e})}))),c.a.createElement("select",{className:"ql-align",defaultValue:""},c.a.createElement("option",{value:""}),c.a.createElement("option",{value:"center"}),c.a.createElement("option",{value:"right"}),c.a.createElement("option",{value:"justify"})),c.a.createElement("button",{className:"ql-blockquote"}),c.a.createElement("button",{className:"ql-code-block"}),c.a.createElement("button",{className:"ql-list",value:"ordered"}),c.a.createElement("button",{className:"ql-list",value:"bullet"}),c.a.createElement("button",{className:"ql-indent",value:"-1"}),c.a.createElement("button",{className:"ql-indent",value:"+1"}),c.a.createElement("button",{className:"ql-link"}),c.a.createElement("button",{className:"ql-image"}),c.a.createElement("button",{className:"ql-video"}),c.a.createElement("button",{className:"ql-script",value:"sub"}),c.a.createElement("button",{className:"ql-script",value:"super"}),c.a.createElement("button",{className:"ql-formula"}),c.a.createElement("button",{className:"ql-clean"}))}a(1291);var x=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).destroyEditor=function(){n.editor&&(n.editor.off("text-change",n.editorTextChangeHandler),n.editor=null)},n.setEditorContent=function(e){var t=n.editor,a=t.clipboard.convert(e);t.setContents(a)},n.setEditorSelection=function(){var e=n.editor,t=e.getSelection();if(t){var a=e.getLength();t.index=Math.max(0,Math.min(t.index,a-1)),t.length=Math.max(0,Math.min(t.length,a-1-t.index)),e.setSelection(t)}},n.addHandler=function(){var e=n.editor;e.getModule("toolbar").addHandler("image",(function(){e.setSelection(Math.max(e.getSelection().index+1,e.getLength())),Object(b.a)().then(function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.b.loading("\u4e0a\u4f20\u4e2d...",0),t.prev=1,t.next=4,Object(v.d)(a);case 4:r=t.sent,(c=e.getSelection())&&(e.insertEmbed(c.index,"image",r),e.setSelection(c.index+1)),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),u.b.destroy(),u.b.error("\u4e0a\u4f20\u5931\u8d25");case 14:return t.prev=14,n(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,9,14,17]])})));return function(e){return t.apply(this,arguments)}}())}))},n.editorTextChangeHandler=function(){var e=n.editor.container.firstChild.innerHTML;n.setState({value:e}),n.props.onChange&&n.props.onChange(e)},n.containerRef=function(e){return n.containerEl=e},n.toolbarRef=function(e){return n.toolbarEl=e},n.state={value:e.value,loaded:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(h.a)("/e-admin-react/quill1.3.6/quill.js",window.Quill,(function(t){if(t)return u.b.warning("\u52a0\u8f7d\u7f16\u8f91\u5668\u5931\u8d25");e.setState({loaded:!0},(function(){e.initEditor()}))}))}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setEditorContent(this.props.value)}},{key:"componentWillUnmount",value:function(){this.destroyEditor()}},{key:"initEditor",value:function(){!function(){var e=window.Quill,t=e.import("parchment"),a=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return a}(t.Attributor.Class),n=new a("size","ql-size",{scope:t.Scope.INLINE,whitelist:g}),r=new a("lineHeight","ql-line-height",{scope:t.Scope.INLINE,whitelist:N}),c=e.import("formats/font");c.whitelist=E,e.register(c,!0),e.register({"formats/size":n,"formats/lineHeight":r},!0)}();var e=this.props.placeholder,t=void 0===e?"\u8bf7\u8f93\u5165...":e,a=this.editor=new window.Quill(this.containerEl,{theme:"snow",placeholder:t,modules:{toolbar:this.toolbarEl}});this.addHandler(),this.setEditorContent(this.props.value),a.on("text-change",this.editorTextChangeHandler)}},{key:"render",value:function(){var e=this.state.loaded,t=this.props.height,a=void 0===t?"200px":t;return e?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:this.toolbarRef},c.a.createElement(q,null)),c.a.createElement("div",{ref:this.containerRef,style:{height:a}})):c.a.createElement("div",{style:{height:a}})}}]),a}(r.Component);function w(){var e=Object(r.useState)(""),t=Object(n.a)(e,2),a=t[0],l=t[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){l("<b>test</b>")}),1e3);return function(){clearTimeout(e)}}),[]),c.a.createElement(o.a,null,c.a.createElement(x,{value:a,onChange:l}))}},937:function(e,t,a){e.exports={pageWrapper:"index_pageWrapper__1clcZ",hasBread:"index_hasBread__1Q_ch",isColumn:"index_isColumn__uSOTi",pageContainer:"index_pageContainer__1enpq",transparent:"index_transparent__1vH8A",bread:"index_bread__2_CKz",backTop:"index_backTop__1hSwH"}},939:function(e,t,a){"use strict";a(128),a(942);var n=a(946),r=a(308),c=a(0),o=a.n(c),l=a(6),i=a.n(l),u=(a(202),a(113),a(307),a(943),a(945)),s=a(114),m=a(944),d=a(937),f=a.n(d),p=function(e){var t=e.breadcrumbs;return o.a.createElement(u.a,{className:f.a.bread},t.map((function(e){return o.a.createElement(u.a.Item,{key:e.key},"/"===e.match.url?o.a.createElement(s.b,{to:e.match.url},e.breadcrumb.props.children):o.a.createElement("span",null,e.breadcrumb.props.children))})))},b=function(e){var t=e.breads,a=void 0===t?[]:t,n=Object(m.a)(a)(p);return o.a.createElement(n,null)},v=a(203),h=function(e){var t,a=Object(v.b)().userStore,c=e.wrapperClass,l=e.containerClass,u=e.hasBread,s=e.isColumn,m=e.transparent,d=a.breads,p=i()(f.a.pageWrapper,c,(t={},Object(r.a)(t,f.a.hasBread,u),Object(r.a)(t,f.a.isColumn,s),Object(r.a)(t,f.a.transparent,m),t));return o.a.createElement("div",{className:p},u&&o.a.createElement(b,{breads:d}),o.a.createElement("div",{className:"".concat(f.a.pageContainer," ").concat(l)},e.children),o.a.createElement(n.a,{className:f.a.backTop}))};h.defaultProps={wrapperClass:"",containerClass:"",hasBread:!0,isColumn:!1,transparent:!1};t.a=h},956:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return f}));a(145);var n=a(115),r=a.n(n),c=(a(174),a(176)),o=a(147),l=a(204),i=a.n(l),u=a(72),s=function(e){return Object(o.b)({method:"get",url:"/upload/qiniu_token",params:e})},m=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,o,l,m,d=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>2&&void 0!==d[2]?d[2]:function(){},e.next=3,s();case 3:return c=e.sent,o=c.token,(l=new FormData).append("file",t),l.append("key",a||Object(u.e)()+t.name),l.append("token",o),e.next=11,i()({method:"post",url:window.QINIU_UPLOAD_URL,data:l,onUploadProgress:n});case 11:return m=e.sent,e.abrupt("return",window.QINIU_PREFIX+m.data.key);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),d=function(){return Object(o.b)({method:"get",url:"/role/total"})},f=function(e){return Object(o.b)({method:"get",url:"/resource/total",params:e})}}}]);